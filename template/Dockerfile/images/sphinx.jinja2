{% import 'Dockerfile/provision.jinja2' as provision %}

{% macro alpine() -%}
RUN /usr/local/bin/apk-install \
    # General sphinx
    py-pillow \
    py-yaml \
    py-sphinx \
    py-sphinx_rtd_theme \
    # GRAPHVIZ
    graphviz \
    ttf-dejavu \
    make \
    && pip install --upgrade sphinxcontrib-googlechart \
    && pip install --upgrade sphinxcontrib-googlemaps \
    && pip install --upgrade sphinxcontrib-httpdomain \
    && pip install --upgrade sphinxcontrib-slide \
    && pip install --upgrade sphinx-autobuild \
    && pip install --upgrade recommonmark \
    # TYPO3 stuff
    && pip install t3SphinxThemeRtd \
    && pip install t3fieldlisttable \
    && pip install t3tablerows \
    && pip install t3targets \
    && apk add -U --repository http://dl-3.alpinelinux.org/alpine/edge/main poppler \
    && apk add -U --repository http://dl-3.alpinelinux.org/alpine/edge/testing texlive-full \
    && ln -s /usr/bin/mktexlsr /usr/bin/mktexlsr.pl \
    && ln -s /usr/bin/mktexlsr /usr/share/texmf-dist/scripts/texlive/mktexlsr.pl
{%- endmacro %}
